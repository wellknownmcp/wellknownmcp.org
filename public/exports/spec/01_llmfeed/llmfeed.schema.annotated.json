{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "LLMFeed V2",
  "type": "object",
  "properties": {
    "feed_type": {
      "type": "string",
      "__comment": "Mandatory. Should be one of: export, mcp, prompt, credential, etc."
    },
    "metadata": {
      "type": "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "origin": {
          "type": "string",
          "format": "uri",
          "__comment": "URL origin of the feed, required for inter-agent referencing."
        },
        "description": {
          "type": "string"
        },
        "generated_at": {
          "type": "string",
          "format": "date-time"
        },
        "lang": {
          "type": "string"
        }
      },
      "required": [
        "title",
        "origin"
      ]
    },
    "prompts": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "intent": {
            "type": "string",
            "__comment": "Intent must be declared in each prompt for agent-routing clarity."
          },
          "keywords": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "description": {
            "type": "string"
          }
        },
        "required": [
          "intent"
        ]
      }
    },
    "capabilities": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "method": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "description": {
            "type": "string"
          }
        }
      }
    },
    "data": {
      "type": [
        "object",
        "array",
        "string"
      ]
    },
    "summary": {
      "type": "string"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "trust": {
      "type": "object",
      "properties": {
        "signed_blocks": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "__comment": "List of top-level blocks that are signed. ['all'] is recommended for most feeds."
        },
        "scope": {
          "type": "string"
        },
        "certifier": {
          "type": "string",
          "format": "uri"
        },
        "public_key_hint": {
          "type": "string",
          "format": "uri"
        }
      }
    },
    "signature": {
      "type": "object",
      "properties": {
        "algorithm": {
          "type": "string"
        },
        "value": {
          "type": "string"
        },
        "canonicalization": {
          "type": "string"
        },
        "public_key_hint": {
          "type": "string",
          "format": "uri"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "certification": {
      "type": "object",
      "properties": {
        "certifier": {
          "type": "string"
        },
        "targets": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "value": {
          "type": "string"
        },
        "algorithm": {
          "type": "string"
        },
        "issued_at": {
          "type": "string",
          "format": "date-time"
        },
        "expires_at": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "flags": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "submitted_by": {
            "type": "string"
          },
          "reason": {
            "type": "string"
          },
          "status": {
            "type": "string"
          },
          "source": {
            "type": "string",
            "format": "uri"
          },
          "date": {
            "type": "string",
            "format": "date-time"
          }
        }
      }
    },
    "agent_behavior": {
      "type": "object"
    },
    "agent_guidance": {
      "type": "object"
    },
    "audience": {
      "type": "array",
      "items": {
        "type": "string"
      }
    },
    "session_behavior": {
      "type": "string"
    },
    "risk_score": {
      "type": "number"
    },
    "safety_tier": {
      "type": "string"
    },
    "attachments": {
      "type": "array"
    },
    "examples": {
      "type": "array"
    }
  },
  "required": [
    "feed_type",
    "metadata"
  ],
  "__comment": "This schema validates full .llmfeed.json files according to MCP v1.0 expectations."
}